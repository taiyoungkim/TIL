# 20221212
## 오늘 공부한 내용
## - 📑 : 디자인 패턴
# 싱글톤 패턴

## 싱글톤 패턴이란?

인스턴스가 프로그램 내에서 오직 **하나만 생성**되는 것을 보장하고, 프로그램 **어디에서든** 이 인스턴스에 **접근**할 수 있도록 하는 패턴이다.

## 싱글톤 패턴 사용 이유

먼저, 객체를 생성할 때마다 메모리 영역을 할당받아야 한다. 하지만 하나의 object를 통해 객체를 생성한다면 메모리 낭비를 방지할 수 있다.

또한, 싱글톤으로 구현한 인스턴스는 전역이므로, 다른 클래스의 인스턴스들이 데이터를 공유하는 것이 가능하기 때문에 많이 사용된다.

주로 사용 하는 부분은 아래와 같다.

<aside>
💡 데이터베이스 커넥션풀, 스레드풀, 캐시, 로그 기록 객체등

</aside>

## 적용

코틀린에서는 다행히도 싱글톤을 쓸수있는 Object를 제공한다.

그래서 자바에서처럼 복잡하게 작업 할 필요없다.

```kotlin
object RetrofitServiceImpl {
	private const val BASE_URL = ""

	private val retofit: Retrofit = Retrofit.Builder()
			.baseUrl(BASE_URL)
			.addConverterFactory(GsonConverterFactory.create())
			.build()
}
```

위에 처럼 object를 사용하고 필요한 코드만 사용하면 끝이다.

그러나 코틀린에서 싱글톤은 object 하나만 있는건 아니다.

자바와 비슷하게 사용할 수 있는 companion object도 있다.

object와 companion object의 차이는 몇가지 있는데 정리해보면

1. 선언 구조 차이
    1. object는 클래스 **외부**에서 선언 된다.
    2. companion object는 클래서 **내부**에서 선언된다.
2. 사용방법
    1. object
        
        object로 선언된 클래스는 별도 생성없이 바로 호출이 가능하다.
        
        접근 시점에 하나의 객체만 생성되므로 생성자가 없는 클래스만 사용할 수 있다.
        
        초기화하기 위해서는 init블록을 사용하며 처음에만 실행된다.
        
        선언된 속성과 함수는 클래스명.(함수/필드)로 호출 가능하다.
        
    2. companion object
        
        companion object로 생성한 파라미터가 있는 싱글톤 클래스는 객체를 생성할 수 있다.
        
        상속 관계에서 companion 멤버는 가려진다.
        
        여러 개의 객체를 생성할 수 있지만, 클래스의 메모리 주소값은 동일하다.
        
        선언된 속성과 함수는 클래스명, 객체명으로 호출이 가능하다.

## 부족한 내용
디자인 패턴에 관한 내용이나 다른 디자인 패턴에 대해 더 공부해야겠다.   
아마 디자인 패턴 부분은 블로그에도 다시 정리해서 올릴거같다.

## 느낀 점
디자인 패턴을 무조건 사용하는게 좋은건 아니지만 확실히 코드를 짤때,
방향성이 잡히는거같다. 

## 내일 할 일
다음은 팩토리 패턴이나 전략 패턴에 대해서 공부할 생각이다. 