# 20221208
## ì˜¤ëŠ˜ ê³µë¶€í•œ ë‚´ìš©
## - ğŸ“‘ : Kotlin Functional Programming ì‹¤ì „
### maxby

```kotlin
data class Magic(val name: String, val damage: Int)

fun findTheStrongest(magics: List<Magic>) {
    var maxDamage = 0
    var theStrongest: Magic? = null
    for (magic in magics) {
        if (magic.damage > maxDamage) {
            maxDamage = magic.damage
            theStrongest = magic
        }
    }
    println(theStrongest)
}

fun main(args: Array<String>) {
    val magics = listOf(Magic("FireBall", 29), Magic("IceBolt", 31))
    findTheStrongest(magics)
}
```

Magicì´ë€ ê°ì²´ë¥¼ ë§Œë“¤ê³  ê°€ì¥ ë°ë¯¸ì§€ê°€ ë†’ì€ ë§ˆë²• í•˜ë‚˜ë¥¼ ë½‘ëŠ” ì½”ë“œë‹¤.

ì‚¬ì‹¤ êµ¬í˜„í•˜ê¸°ì—” ì‰½ì§€ë§Œ, ë„ˆë¬´ë‚˜ë„ ë§ì´ ì‚¬ìš©í•˜ëŠ” ì½”ë“œ íŒ¨í„´ì´ë‹¤.

```kotlin
val magics = listOf(Magic("FireBall", 29), Magic("IceBolt", 31))
println(magics.maxBy {it.damage})
```

ê·¸ì¹˜ë§Œ ì´ë ‡ê²Œ collectionì˜ **maxBy**ë¥¼ ì‚¬ìš©í•˜ë©´ ìœ„ ì½”ë“œì²˜ëŸ¼ findTheStrongestë€ í•¨ìˆ˜ë¥¼ êµ¬í˜„í•˜ì§€ ì•Šê³ ë„ ê°„ë‹¨í•˜ê²Œ ì°¾ì„ìˆ˜ìˆë‹¤.

### filter, map

**filter**ëŠ” predicateí˜•íƒœì˜ ëŒë‹¤ì‹ì„ ì¸ìë¡œ ë°›ì•„ ì¡°ê±´ì— ë”°ë¼ collectionì˜ ì›ì†Œë¥¼ filtering í•˜ëŠ” ê¸°ëŠ¥í•˜ë‹¤.

```kotlin
fun main(args: Array) {
    val list = listOf(1, 2, 3, 4)
    println(list.filter { it % 2 == 0 })
}

```

listì—ì„œ ì§ìˆ˜ë§Œ ë½‘ì•„ë‚´ëŠ” ì½”ë“œ ë‹¤.

```kotlin
data class Magic(val name: String, val damage: Int)

fun main(args: Array) {
    val magics = listOf(Magic("FireBall", 29), Magic("IceBolt", 31))
    println(magics.filter { it.damage > 30 })
}
```

ë°ë¯¸ì§€ê°€ 30 ì´ˆê³¼ì¸ ë§ˆë²•ë§Œ ë½‘ì•„ë‚´ëŠ” ì½”ë“œë‹¤.

**map**ì€ ì›ì†Œë¥¼ ì›í•˜ëŠ” í˜•íƒœë¡œ ë³€í™˜í•˜ëŠ” ê¸°ëŠ¥ì„ í•˜ë©° ì´ë“¤ì˜ ë°˜í™˜ê°’ì€Â listÂ ì´ë‹¤ë‹¤.

```kotlin
data class Magic(val name: String, val damage: Int)

fun main(args: Array) {
    val magics = listOf(Magic("FireBall", 29), Magic("IceBolt", 31))
    println(magics.map { it.damage })
}

```

ì´ë•Œ ì•ì„œì„œ ë‚˜ì™”ë˜ method referenceë¥¼ ì´ìš©í•˜ì—¬Â í•˜ê¸°ì™€ ê°™ì´ í‘œí˜„í•´ë„ ìƒê´€ ì—†ë‹¤.

```kotlin
magics.map {Magic::name}
```

ë§Œì•½ ê°€ì¥ ë°ë¯¸ì§€ê°€ ë†’ì€ ë§ˆë²•ì˜ ì´ë¦„ì„ êµ¬í•´ì•¼ í•œë‹¤ë©´ ë‹¤ìŒ ë‘ê°€ì§€ë¡œ ì½”ë“œë¥¼ ì‘ì„±í•´ ë³¼ ìˆ˜ ìˆë‹¤.

```kotlin
// filterì˜ ë‚´ë¶€ì—ì„œ maxBy ì´ìš©
magics.filter { it.damage == magics.maxBy{Magic::damage}!!.damage}

// filterì˜ ì™¸ë¶€ì—ì„œ maxBy ì´ìš©
val maxDamage = magics.maxBy{Magic::damage}!!.damage
magics.filter { it.damage == maxDamage}

```

ìƒë‹¨ì´ ì½”ë“œëŠ” ë§¤ìš° ë¹„íš¨ìœ¨ì ì¸ ì½”ë“œ ì…ë‹ˆë‹¤. filterë¥¼ ëŒë©´ì„œ ë‚´ë¶€ì ìœ¼ë¡œ maxë¥¼ êµ¬í•˜ê¸° ìœ„í•´ ë‚´ë¶€ì ìœ¼ë¡œ ë§¤ë²ˆ forë¬¸ì„ ëŒê²Œ ë˜ë¯€ë¡œ ë°–ìœ¼ë¡œ ë¹¼ì£¼ëŠ”ê²Œ ì¢‹ë‹¤.

ë”°ë¼ì„œ ë¬´ì‘ì • ì½”ë“œëŸ‰ì„ ì¤„ì´ê¸° ë³´ë‹¨Â **ë°˜ë³µì´ ì¤‘ì²©ë˜ì§€ ì•ŠëŠ”ì§€ ë‚´ë¶€ì ì¸ ë™ì‘ì— ëŒ€í•´ì„œÂ ê³ ë ¤í•œ í›„ì— ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ”ê²Œ ì¢‹ë‹¤.**

ë§µì˜ ê²½ìš°Â **filterKeys**,Â **mapKeys**ë€ keywordë¥¼ ì œê³µí•˜ê³ , ê°’ì„ ìœ„í•œÂ **filterValues**,Â **mapValues**ë€ í‚¤ì›Œë“œë„ ì œê³µí•©ë‹ˆë‹¤.

```kotlin
fun main(args: Array) {
    val numbers = mapOf(0 to "zero", 1 to "one")
    println(numbers.mapValues { it.value.toUpperCase() })
}
```

### **all, any, count, find**

**all** : collection **ì „ì²´**ê°€ ì£¼ì–´ì§„ predicateë¥¼ **ë§Œì¡±**í•˜ëŠ”ì§€ë¥¼ íŒë‹¨ **Boolean**ì„ ë¦¬í„´í•˜ê³  nullì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.

**any** : collectionì˜ ì›ìˆ˜ì¤‘ **í•˜ë‚˜ë¼ë„** ì£¼ì–´ì§„ predicateë¥¼ **ë§Œì¡±**í•˜ëŠ”ì§€ë¥¼ íŒë‹¨ **Boolean**ì„ ë¦¬í„´í•˜ê³  nullì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.

**count** : ì£¼ì–´ì§„ predicateë¥¼ **ë§Œì¡±í•˜ëŠ” ì›ì†Œì˜ ê°œìˆ˜**ë¥¼ ë¦¬í„´, nullì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ”ë‹¤

**find** : ì£¼ì–´ì§„ predicateì— **ë§Œì¡±í•˜ëŠ” ì²«ë²ˆì§¸ ì›ì†Œ**ë¥¼ ë¦¬í„´, nullì„ í—ˆìš©

### groupBy

ì£¼ë¡œ groupByëŠ” sqlì—ì„œ ë³´ì§€ë§Œ collectionì—ì„œë„ ì œê³µí•´ì¤€ë‹¤.

```kotlin
data class Magic(val name: String, val damage: Int)

fun main(args: Array) {
    val magics = listOf(Magic("FireBall", 29), Magic("IceBolt", 31),
						, Magic("Lighting", 31))
    println(magics.groupBy { it.damage })
}
```

ë‘ê°œë¥¼ ë§Œë“¤ì–´ listì— ë„£ê³  listì˜ groupByë¥¼ ìˆ˜í–‰í•˜ë©´ ë° ë¯¸ ì—ë¼ë”° rorupingì´ ë©ë‹ˆë‹¤.
ë”°ë¼ì„œ ìœ„ ì½”ë“œì˜ returnê°’ì€ Map<Int, List<Magic>> ì´ ë©ë‹ˆë‹¤.
-> key: damage, value: í•´ë‹¹ë˜ëŠ” magic ê°ì²´ë¥¼ ë‹´ëŠ” ë¦¬ìŠ¤íŠ¸

### flatMap, flatten

**flatMap**ì€ ì£¼ì–´ì§„ ëŒë‹¤ë¡œ Mapì„ ë§Œë“¤ê³  ì´ë¥¼ ë‹¤ì‹œ flatí•˜ê²Œ ë§Œë“œëŠ” í•¨ìˆ˜ ì…ë‹ˆë‹¤.

ì¦‰Â **mapì„ ì²˜ë¦¬í•˜ê³  ë‚œ ë‹¤ìŒì˜ ê²°ê³¼ê°€ listì¸ê²½ìš° ì´ listì˜ ì›ì†Œë¥¼ ë‹¤ì‹œ í¼ì³ì„œ í•˜ë‚˜ì˜ listë¡œ ë§Œë“­ë‹ˆë‹¤.**

í—·ê¹”ë¦´ ìˆ˜ë„ ìˆì§€ë§Œ "**listì˜ listë¥¼ ì²˜ë¦¬í• ë•Œ ì“´ë‹¤**"ë¥¼ ê¸°ì–µí•˜ê³  ìˆìœ¼ë©´ ì‰¬ìš¸ê²ƒ ê°™ìŠµë‹ˆë‹¤.

```kotlin
fun main(args: Array) {
    val strings = listOf("abc", "def")
    println(strings.flatMap { it.toList() })
}

```

ìœ„ ì½”ë“œë¥¼ ë¶„ì„í•´ ë³´ë©´ ì•„ë˜ ë‘ ë‹¨ê³„ë¥¼ ê±°ì¹©ë‹ˆë‹¤.

1. it.toList()ë¥¼ ì´ìš©í•˜ì—¬ ì›ì†Œë¥¼ map ì²˜ë¦¬í•œë‹¤. ê²°ê³¼ => list("abc"), list("def")
2. listì˜ ì›ì†Œë¥¼ flat í•˜ê²Œ ë§Œë“ ë‹¤. ê²°ê³¼ => list("a","b","c","d","e","f")

```kotlin
class Book(val title: String, val authors: List)

fun main(args: Array) {
    val books = listOf(Book("Thursday Next", listOf("Jasper Fforde")),
                       Book("Mort", listOf("Terry Pratchett")),
                       Book("Good Omens", listOf("Terry Pratchett",
                                                 "Neil Gaiman")))
    println(books.flatMap { it.authors }.toSet())
}

```

í•œ ì±…ì— ì €ìê°€ ì—¬ëŸ¬ëª…ì¼ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë”°ë¼ì„œ ìœ„ ì½”ë“œì—ì„œëŠ” ëŒë‹¤ì‹{it.authors}ì˜ map ê²°ê³¼ê°€ listì…ë‹ˆë‹¤.

flatMapì´ê¸° ë•Œë¬¸ì— listë¡œ ë‚˜ì˜¨ ê²°ê³¼ë¥¼ ì „ë¶€ flat í•˜ê²Œ í¼ì¹©ë‹ˆë‹¤.

ê·¸ë¦¬ê³  ë‚˜ì„œ toSet()ìœ¼ë¡œ ë¬¶ì–´ì£¼ë©´ ì¤‘ë³µì´ ì œê±°ë˜ì–´ uniqueí•œ authorë¡œ êµ¬ì„±ëœ setì´ ë°˜í™˜ë©ë‹ˆë‹¤.

## ë¶€ì¡±í•œ ë‚´ìš©
ì•„ì§ ë‹¤ ëª»ë‹¤ë£¬ í•¨ìˆ˜ê°€ ìˆë‹¤.   
ë‚´ì¼ ë‚˜ë¨¸ì§€ í•¨ìˆ˜ë¥¼ ë‹¤ë¤„ ë³´ì.

## ëŠë‚€ ì 
í•˜ë‚˜í•˜ë‚˜ ì˜ˆì‹œë¥¼ ë§Œë“¤ì–´ê°€ë©´ì„œ í•´ë³´ë‹ˆê¹ ìµìˆ™í•´ì§„ë‹¤.   
ì‹¤ë¬´ì—ì„œë„ ì œëŒ€ë¡œ ê°œë…ì„ ì•Œê³  ì‚¬ìš©í•˜ë‹ˆ ì½”ë“œì— ìì‹ ê°ì´ ìƒê¸´ë‹¤.

## ë‚´ì¼ í•  ì¼
ë‹¤ë£¨ì§€ ëª»í•œ ë‹¤ë¥¸ í•¨ìˆ˜ë¥¼ ì‹¤ì œì  ì˜ˆì‹œë‚˜ ì ìš©ì„ í•´ë³´ì.