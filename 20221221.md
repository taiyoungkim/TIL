# 20221221
## μ¤λ κ³µλ¶€ν• λ‚΄μ©
## - π“‘ : λ””μμΈ ν¨ν„΄
# μƒνƒ ν¨ν„΄ (State Pattern)

## μƒνƒ ν¨ν„΄μ΄λ€?

μƒνƒ ν¨ν„΄μ€ κ°μ²΄κ°€ **νΉμ •Β μƒνƒ**μ— λ”°λΌ **ν–‰μ„**λ¥Ό λ‹¬λ¦¬ν•λ” μƒν™©μ—μ„, μμ‹ μ΄ **μ§μ ‘** μƒνƒλ¥Ό **μ²΄ν¬**ν•μ—¬ μƒνƒμ— λ”°λΌ ν–‰μ„λ¥Ό **νΈμ¶ν•μ§€ μ•κ³ **, **μƒνƒλ¥Ό κ°μ²΄ν™”** ν•μ—¬Β μƒνƒκ°€ **ν–‰λ™**μ„ ν•  μ μλ„λ΅Β **μ„μ„**ν•λ” ν¨ν„΄μ„ λ§ν•©λ‹λ‹¤.

μ¦‰, κ°μ²΄μ νΉμ •Β μƒνƒλ¥Ό ν΄λμ¤λ΅ μ„ μ–Έν•κ³ , ν΄λμ¤μ—μ„λ” ν•΄λ‹Ή μƒνƒμ—μ„ ν•  μ μλ” ν–‰μ„λ“¤μ„ λ©”μ„λ“λ΅ μ •μν•©λ‹λ‹¤.

κ·Έλ¦¬κ³  μ΄λ¬ν• κ° μƒνƒ ν΄λμ¤λ“¤μ„ μΈν„°νμ΄μ¤λ΅ μΊ΅μν™” ν•μ—¬, ν΄λΌμ΄μ–ΈνΈμ—μ„ μΈν„°νμ΄μ¤λ¥Ό νΈμ¶ν•λ” λ°©μ‹μ„ λ§ν•©λ‹λ‹¤.

## **μ¥μ **

- μƒνƒ λ³€κ²½μ— λ”°λ¥Έ ν–‰μ„ λ΅μ§μ„ μ§μ ‘ κµ¬ν„ ν•μ§€ μ•μ•„λ„ λ¨μΌλ΅μ¨ **ν™•μ¥μ— μ λ¦¬**ν•λ‹¤.
- λ²μ΅ν• **λ¶„κΈ°λ΅μ§μ΄ μ κ±°**λλ‹¤.

## **λ‹¨μ **

- κ΄€λ ¨ ν΄λμ¤κ°€ λ§μ•„μ € **λ³µμ΅λ„κ°€ μ¦κ°€**

## μƒνƒ ν¨ν„΄μ μ‚¬μ© μ΄μ 

κ°μ²΄μ μƒνƒμ— λ”°λΌμ„ μ‹¤ν–‰λλ” ν–‰μ„κ°€ λ‹¬λΌμ Έμ•Ό ν•  λ• μ°λ¦¬λ” μ£Όλ΅ `if`Β μ  λλ”Β `switch - case`Β λ¥Ό μ‚¬μ©ν•΄μ„ μ‘μ—…μ„ ν•λ‹¤.

```kotlin
// κ²μ„μ—μ„ λ¬Όμ•½μ„ λ¨Ήλ” μƒν™©
fun drinkPotion() {
    if (state === DAMAGED) {
        println("μ²΄λ ¥μ΄ νλ³µλ©λ‹λ‹¤.")
        potionCnt--
    } else if (state === HEALTHFUL) {
        println("μ²΄λ ¥μ΄ κ°€λ“ μ°¨ μμµλ‹λ‹¤.")
    } else if (state === DEAD) {
        println("μ΄λ―Έ μ‚¬λ§ν–μµλ‹λ‹¤.")
    }
}
```

λ¬Όμ•½μ„ λ¨Ήλ” λ™μΌν• ν–‰μ„λ¥Ό μ μ €μ μƒνƒμ— λ”°λΌμ„ λ‹¤λ¥΄κ² ν‘ν„ν•λ” κ°„λ‹¨ν• μ½”λ“λ‹¤.

κ·Έλ°λ°, μ²΄λ ¥ νλ³µ λ¶κ°€ μƒνƒκ°€ μ¶”κ°€ λλ‹¤κ³  κ°€μ • ν•΄λ³΄μ. κ·ΈλΌ λ‹¤μ‹ else if λ¥Ό μ‚¬μ©ν•΄μ„ μ΅°κ±΄λ¬Έμ„ μ¶”κ°€ν•λ‹¤.

μ΅°κ±΄λ¬Έ ν•λ‚λ§ μ¶”κ°€ λλ‹¤κ³  λ¶νΈν•κ²ƒλ„ μ—†λ”λ°λΌκ³  μƒκ°μ΄ λ  μ λ„μμ§€λ§, ν•΄λ‹Ή μƒνƒκ°€ λ‹¤λ‰μΌλ΅ λμ–΄λ‚κ² λλ©΄ μ½”λ“λ” μƒλ‹Ήν κΈΈμ–΄μ§€κ³  μƒνƒμ— λ”°λΌ ν•κ³ μ ν•λ” ν–‰μ„λ¥Ό νμ•…ν•κΈ°λ„ μ–΄λ ¤μ›μ§„λ‹¤.

κ·Έλ¦¬κ³  λΉ„μ·ν• ν–‰μ„μΈ λ§λ‚ λ¬Όμ•½μ„ λ¨Ήλ” κΈ°λ¥μ„ μ¶”κ°€ν•λ‹¤κ³  ν•λ©΄ μ΄λ―Έ κµ¬ν„ν• νλ³µκ³Ό μƒνƒμ— λ”°λ¥Έ ν–‰μ„λ” λ¨λ‘ μΌμΌμ΄ λ‹¤ μ°Ύμ•„κ°€ μμ •ν•΄μ•Όν•λ‹¤.

λ”°λΌμ„ μ΄λ ‡κ² μƒνƒμ— λ”°λΌ ν–‰μ„λ¥Ό λ‹¬λ¦¬ν•΄μ•Ό ν•λ” κ²½μ°μ— μ‚¬μ©ν•λ” ν¨ν„΄μ΄ μƒνƒ ν¨ν„΄μ΄λ‹¤.

## μƒνƒ ν¨ν„΄ μ μ©

μƒνƒ ν¨ν„΄μ„ μ μ©ν•λ©΄ κ° μƒνƒλ“¤, μ¦‰ DAMAGED, HEALTHFUL, DEADλ¥Ό ν΄λμ¤λ΅ μ •μν•κ³  μ΄λ“¤μ„ ν•λ‚μ μΈν„°νμ΄μ¤λ΅ λ¬¶λ”λ‹¤. κ·Έλ¦¬κ³ λ‚μ„ Potionμ΄ μƒνƒ μΈν„°νμ΄μ¤μ λ©”μ„λ“λ¥Ό νΈμ¶ν•λ©΄, κ° μƒνƒ ν΄λμ¤μ—μ„ μ •μλ ν–‰μ„κ°€ μν–‰λλ” λ°©μ‹μ΄λ‹¤.

μ΄λ¥Ό μ½”λ“λ΅ ν‘ν„ν•λ©΄ λ‹¤μκ³Ό κ°™λ‹¤.


```kotlin
interface UserState {
    fun potionDrink()
}

class Damaged : UserState {
    override fun potionDrink() {
        println("μ²΄λ ¥μ„ νλ³µν•©λ‹λ‹¤.")
    }
}

class Healthful : UserState {
    override fun potionDrink() {
        println("μ²΄λ ¥μ΄ κ°€λ“ μ°¨ μμµλ‹λ‹¤.")
    }
}

class Dead : UserState {
    override fun potionDrink() {
        println("μ΄λ―Έ μ‚¬λ§ν–μµλ‹λ‹¤.")
    }
}

class Potion {
    private var userState: UserState

    init {
        userState = Healthful()
    }

    fun setUserState(userState: UserState) {
        this.userState = userState
    }

    fun potionDrink() {
        userState.potionDrink()
    }
}

class Client {
    fun main(args: Array<String>) {
        val potion = Potion()
        val damaged = Damaged()
        val healthful = Healthful()
        val dead = Dead()
        
        potion.potionDrink()
        potion.setUserState(damaged)
        potion.potionDrink()
        potion.setUserState(dead)
        potion.potionDrink()
    }
}
```

μ΄λ ‡κ² μ‘μ—…μ„ ν•λ©΄ μ΄μ  μƒνƒλ§ μ—…λ°μ΄νΈν•λ©΄ ν–‰μ„λ” μ•μ•„μ„ λ°”λ€κ² λλ‹¤.

μ‚¬μ‹¤ μƒνƒ ν¨ν„΄μ€ μ „λµ ν¨ν„΄κ³Ό μƒλ‹Ήν μ μ‚¬ν•λ‹¤.

κ·Έλ¬λ‚ λ‘μ€ λ‹¤λ¥Έ ν¨ν„΄μ΄κ³  μ‚¬μ©μ— λ”°λΌ κµ¬λ¶„μ„ ν•λ‹¤κ³  μƒκ°ν•λ©΄ λλ‹¤.

**μ „λµ ν¨ν„΄**μ€ **μƒμ†μ„ λ€μ²΄**ν•λ ¤λ” λ©μ 

**μƒνƒ ν¨ν„΄**μ€ **μ½”λ“λ‚΄μ μ΅°κ±΄λ¬Έλ“¤μ„ λ€μ²΄**ν•λ ¤λ” λ©μ 

## λ¶€μ΅±ν• λ‚΄μ©
μ „λµ ν¨ν„΄κ³Ό μƒνƒ ν¨ν„΄μ— λ€ν• μ°¨μ΄μ μ‹¤μ  μ‚¬μ©μ΄ λ¶€μ΅±ν•κ±°κ°™λ‹¤.

## λλ‚€ μ 
ν„μ—…μ—μ„λ„ statusλ¥Ό κ°€μ§€κ³  μ—¬λ¬ν•¨μλ¥Ό λ‚λ μ•Ό ν• μΌμ΄ λ§μ€λ° κ·Έλ• μ μ©ν• κ±°κ°™λ‹¤.   

## λ‚΄μΌ ν•  μΌ
νΌμ‚¬λ“ ν¨ν„΄μ— λ€ν•΄ κ³µλ¶€ν• κ±°κ°™λ‹¤.